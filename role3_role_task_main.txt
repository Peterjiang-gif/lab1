name: F5 bigip 
host: bigip 
fact_gathers: false 
var_files:
  role_var
var: 
  provider: 
    username: user
    password: pass 
task: 
 - name: create virtaul pool 
    f5network.f5.f5_modulesbigip_pool: 
      user: "{{ provider[username]}}"
      password: "{{ provider[password] }}"
      server: 10.1.2.150 
      validate_certs: no
      pool: WEB_POOL 
      address: "{{ item.pooladdr }}"
      name: "{{ item.pooladdr }}"
      port: 80 
    delegate_to: localhost 
    loop: "{{ F5[inventory_hostname] | default[]}}"
 - name: add a virtual server 
   f5networks.f5_modules.bigip_virtual_server: 
    provider: "{{ provider }}"
    state: present 
    port: 80 
    destination: 10.1.3.110 
    pool: WEB_POOL 
    name: ANSIBLE_www_1 
